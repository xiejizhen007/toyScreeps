# 任务队列

需求：在游戏运行时适当的添加任务，creep 正确的接收并执行任务，及时去除已完成的任务。

## 思路

采用双队列的形式，一个队列专门用于接收任务，另一个队列存储正在执行的任务。

为什么采用双队列呢？有可能接受任务的 creep 不止一个。
平时一个就差不多足够了，但是在被人攻击的时候，我想要多派一个 creep 来运送能量到 tower, extension, spawn 中，只有一个队列的话似乎不太好实现。

creep 在处理完手上的任务后，接收待执行的任务，并将其移除待执行的任务队列。

为了避免出现重复的任务，在建筑发布任务时，需要检查 `待执行任务和执行中的任务` 是否存在需要发布的任务。

~~采用双队列的形式似乎不太好控制优先级，所以先用单队列。~~

优先进行生产，填塔。

对 lab，tower 等需要资源的建筑，需要及时的填充资源。在资源不足时，或者资源快要见底了，可以发布一个填充的任务。

```ts
{
    // ROOM_TASK.xxx
    type: taskType
    // details，具体细节
}
```

## 任务类型

- spawn 和 extension 的能量填充
- tower 能量填充
- powerSpawn 资源填充
- lab 的资源的搬运
- nuke 的资源填充（能量多的没地放时）
- boost 资源的填充与清理

## 具体细节

### fillExtension

### fillTower

### fillNuke

### fillPowerSpawn

### iLabIn

### iLabOut
