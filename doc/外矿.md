# 外矿设计

前提：

- 在 source 附近有旗

需求：

- 派 `harvesterRoom` 采取能量
- 预定房间，保证能把 source 榨干
- 挖满了，往回送，顺便把回家的路给修一修（感觉没什么必要，后面再说）
- 遇到 npc 时，把 npc 耗死之后继续派人去工作
- 遇到 core 时，派人把 core 给打了， core 打掉之后继续派人
- npc 房间，按需派防卫者

## 添加、删除外矿房间

```ts
// 添加
Room.addHarvestRoom(roomName: string);
// 删除
Room.removeHarvestRoom(roomName: string);
```

## 思路

或许可以自动在 source 附近插旗。

### harvester

**准备阶段：**

- 前往旗子所在的位置

**工作阶段：**

- 无脑挖满

**注意检查房间状态：**

- 能量上限掉了，叫人来预定
- 出现 npc 了，设置 1500 ticks 的 cooldown
- 发现 core 了，派人来拆

**回送阶段：** 

- 回去的时候把路修好