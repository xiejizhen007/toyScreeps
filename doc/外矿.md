# 外矿设计

前提：

- 在 source 附近有旗

需求：

- 派 `harvester` 采取能量，并维护或者修建 container
- 在 container 修好之后，派运输者取能量往回送
- 预定房间，保证能把 source 榨干
- 遇到 npc 时，把 npc 耗死之后继续派人去工作
- 遇到 core 时，派人把 core 给打了， core 打掉之后继续派人
- npc 房间，按需派防卫者

## 添加、删除外矿房间

```ts
// 添加
Room.addHarvestRoom(roomName: string);
// 删除
Room.removeHarvestRoom(roomName: string);
```

## 思路

或许可以自动在 source 附近插旗。

### harvester

**准备阶段：**

- 前往旗子所在的位置

**工作阶段：**

- 没有 container 就新修一个，有了就把 container 的血量补满。然后无脑挖。

**注意检查房间状态：**

- 能量上限掉了，叫人来预定
- 出现 npc 了，设置 1500 ticks 的 cooldown
- 发现 core 了，派人来拆
